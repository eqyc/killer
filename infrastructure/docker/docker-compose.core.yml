# =============================================================================
# KILLER ERP - 核心基础设施服务
# =============================================================================
#
# 提供微服务运行所需的核心依赖服务。
# 适用于本地开发和测试环境。
#
# 使用方式:
#   docker compose -f docker-compose.core.yml up -d
#
# =============================================================================

# =============================================================================
# 应包含的服务
# =============================================================================

# -----------------------------------------------------------------------------
# PostgreSQL 数据库集群
# -----------------------------------------------------------------------------
# 服务名: postgres
# 镜像: postgres:16-alpine
# 端口: 5432:5432
# 环境变量:
#   - POSTGRES_USER
#   - POSTGRES_PASSWORD
#   - POSTGRES_DB
# 数据卷: postgres_data:/var/lib/postgresql/data
# 健康检查: pg_isready

# -----------------------------------------------------------------------------
# Redis 缓存集群
# -----------------------------------------------------------------------------
# 服务名: redis
# 镜像: redis:7-alpine
# 端口: 6379:6379
# 命令: redis-server --appendonly yes --maxmemory 512mb
# 数据卷: redis_data:/data
# 健康检查: redis-cli ping

# -----------------------------------------------------------------------------
# Apache Kafka 消息队列
# -----------------------------------------------------------------------------
# 服务名: kafka
# 镜像: bitnami/kafka:3.7
# 端口:
#   - 9092:9092 (PLAINTEXT)
#   - 9093:9093 (CONTROLLER)
# 环境变量:
#   - KAFKA_CFG_NODE_ID
#   - KAFKA_CFG_PROCESS_ROLES=broker,controller
#   - KAFKA_CFG_LISTENERS
#   - KAFKA_CFG_ADVERTISED_LISTENERS
#   - KAFKA_CFG_CONTROLLER_QUORUM_VOTERS
# 数据卷: kafka_data:/bitnami/kafka
# 健康检查: kafka-topics.sh --bootstrap-server localhost:9092 --list

# -----------------------------------------------------------------------------
# Kafka UI (可选)
# -----------------------------------------------------------------------------
# 服务名: kafka-ui
# 镜像: provectuslabs/kafka-ui:latest
# 端口: 8080:8080
# 环境变量:
#   - KAFKA_CLUSTERS_0_NAME=killer-local
#   - KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS=kafka:9092
# 依赖: kafka

# -----------------------------------------------------------------------------
# MinIO 对象存储
# -----------------------------------------------------------------------------
# 服务名: minio
# 镜像: minio/minio:latest
# 端口:
#   - 9000:9000 (API)
#   - 9001:9001 (Console)
# 命令: server /data --console-address ":9001"
# 环境变量:
#   - MINIO_ROOT_USER
#   - MINIO_ROOT_PASSWORD
# 数据卷: minio_data:/data
# 健康检查: mc ready local

# =============================================================================
# 网络配置
# =============================================================================
# 网络名: killer-network
# 驱动: bridge

# =============================================================================
# 数据卷
# =============================================================================
# - postgres_data
# - redis_data
# - kafka_data
# - minio_data

# TODO: 实现完整的 docker-compose 配置
