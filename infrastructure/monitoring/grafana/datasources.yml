# =============================================================================
# KILLER ERP - Grafana 数据源配置
# =============================================================================
#
# 自动配置 Grafana 数据源。
#
# =============================================================================

# TODO: 实现完整配置

# apiVersion: 1

# datasources:
#   # Prometheus - 指标
#   - name: Prometheus
#     type: prometheus
#     access: proxy
#     url: http://prometheus:9090
#     isDefault: true
#     editable: false
#     jsonData:
#       timeInterval: "15s"
#       httpMethod: POST

#   # Loki - 日志
#   - name: Loki
#     type: loki
#     access: proxy
#     url: http://loki:3100
#     editable: false
#     jsonData:
#       maxLines: 1000

#   # Tempo - 追踪
#   - name: Tempo
#     type: tempo
#     access: proxy
#     url: http://tempo:3200
#     editable: false
#     jsonData:
#       httpMethod: GET
#       tracesToLogs:
#         datasourceUid: loki
#         tags: ['service.name', 'trace_id']
#         mappedTags: [{ key: 'service.name', value: 'service' }]
#         mapTagNamesEnabled: true
#         filterByTraceID: true
#         filterBySpanID: false
#       tracesToMetrics:
#         datasourceUid: prometheus
#         tags: [{ key: 'service.name', value: 'service' }]
#         queries:
#           - name: 'Request rate'
#             query: 'sum(rate(http_requests_total{$$__tags}[5m]))'
#       serviceMap:
#         datasourceUid: prometheus
#       nodeGraph:
#         enabled: true
#       lokiSearch:
#         datasourceUid: loki

#   # PostgreSQL - 业务数据
#   - name: PostgreSQL
#     type: postgres
#     url: postgres:5432
#     database: killer
#     user: grafana_reader
#     secureJsonData:
#       password: ${POSTGRES_PASSWORD}
#     jsonData:
#       sslmode: disable
#       maxOpenConns: 5
#       maxIdleConns: 2
#       connMaxLifetime: 14400

#   # ClickHouse - 分析数据
#   - name: ClickHouse
#     type: grafana-clickhouse-datasource
#     url: http://clickhouse:8123
#     jsonData:
#       defaultDatabase: killer_analytics
#     secureJsonData:
#       password: ${CLICKHOUSE_PASSWORD}
