# =============================================================================
# KILLER ERP - Prometheus 配置
# =============================================================================
#
# 指标收集和告警配置。
#
# =============================================================================

# TODO: 实现完整配置

# -----------------------------------------------------------------------------
# 全局配置
# -----------------------------------------------------------------------------
# global:
#   scrape_interval: 15s
#   evaluation_interval: 15s
#   external_labels:
#     cluster: killer-erp
#     environment: development

# -----------------------------------------------------------------------------
# 告警管理器配置
# -----------------------------------------------------------------------------
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#             - alertmanager:9093

# -----------------------------------------------------------------------------
# 规则文件
# -----------------------------------------------------------------------------
# rule_files:
#   - /etc/prometheus/alerts.yml
#   - /etc/prometheus/recording_rules.yml

# -----------------------------------------------------------------------------
# 抓取配置
# -----------------------------------------------------------------------------
# scrape_configs:

#   # Prometheus 自身
#   - job_name: 'prometheus'
#     static_configs:
#       - targets: ['localhost:9090']

#   # API Gateway
#   - job_name: 'api-gateway'
#     kubernetes_sd_configs:
#       - role: pod
#     relabel_configs:
#       - source_labels: [__meta_kubernetes_pod_label_app]
#         regex: api-gateway
#         action: keep
#       - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]
#         regex: "true"
#         action: keep
#       - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_port]
#         target_label: __address__
#         regex: (.+)
#         replacement: ${1}:9090

#   # 微服务 (通用配置)
#   - job_name: 'killer-services'
#     kubernetes_sd_configs:
#       - role: pod
#         namespaces:
#           names:
#             - killer-system
#     relabel_configs:
#       - source_labels: [__meta_kubernetes_pod_label_app_kubernetes_io_part_of]
#         regex: killer-erp
#         action: keep
#       - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]
#         regex: "true"
#         action: keep

#   # PostgreSQL Exporter
#   - job_name: 'postgres'
#     static_configs:
#       - targets: ['postgres-exporter:9187']

#   # Redis Exporter
#   - job_name: 'redis'
#     static_configs:
#       - targets: ['redis-exporter:9121']

#   # Kafka Exporter
#   - job_name: 'kafka'
#     static_configs:
#       - targets: ['kafka-exporter:9308']

#   # Node Exporter (节点指标)
#   - job_name: 'node'
#     kubernetes_sd_configs:
#       - role: node
#     relabel_configs:
#       - action: labelmap
#         regex: __meta_kubernetes_node_label_(.+)
