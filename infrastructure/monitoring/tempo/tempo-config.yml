# =============================================================================
# KILLER ERP - Tempo 配置
# =============================================================================
#
# 分布式追踪后端配置。
#
# =============================================================================

# TODO: 实现完整配置

# -----------------------------------------------------------------------------
# 服务器配置
# -----------------------------------------------------------------------------
# server:
#   http_listen_port: 3200

# -----------------------------------------------------------------------------
# 分发器配置
# -----------------------------------------------------------------------------
# distributor:
#   receivers:
#     otlp:
#       protocols:
#         grpc:
#           endpoint: 0.0.0.0:4317
#         http:
#           endpoint: 0.0.0.0:4318
#     jaeger:
#       protocols:
#         thrift_http:
#           endpoint: 0.0.0.0:14268
#         grpc:
#           endpoint: 0.0.0.0:14250
#     zipkin:
#       endpoint: 0.0.0.0:9411

# -----------------------------------------------------------------------------
# 摄取器配置
# -----------------------------------------------------------------------------
# ingester:
#   max_block_duration: 5m

# -----------------------------------------------------------------------------
# 压缩器配置
# -----------------------------------------------------------------------------
# compactor:
#   compaction:
#     block_retention: 48h

# -----------------------------------------------------------------------------
# 指标生成器配置
# -----------------------------------------------------------------------------
# metrics_generator:
#   registry:
#     external_labels:
#       source: tempo
#       cluster: killer-erp
#   storage:
#     path: /var/tempo/generator/wal
#     remote_write:
#       - url: http://prometheus:9090/api/v1/write
#         send_exemplars: true
#   traces_storage:
#     path: /var/tempo/generator/traces

# -----------------------------------------------------------------------------
# 存储配置
# -----------------------------------------------------------------------------
# storage:
#   trace:
#     backend: local
#     wal:
#       path: /var/tempo/wal
#     local:
#       path: /var/tempo/blocks

# 生产环境使用对象存储
# storage:
#   trace:
#     backend: s3
#     s3:
#       bucket: tempo-traces
#       endpoint: s3.amazonaws.com
#       access_key: ${AWS_ACCESS_KEY_ID}
#       secret_key: ${AWS_SECRET_ACCESS_KEY}
#     wal:
#       path: /var/tempo/wal
#     block:
#       bloom_filter_false_positive: 0.05
#       v2_index_downsample_bytes: 1000
#       v2_encoding: zstd

# -----------------------------------------------------------------------------
# 覆盖配置
# -----------------------------------------------------------------------------
# overrides:
#   defaults:
#     metrics_generator:
#       processors: [service-graphs, span-metrics]

# -----------------------------------------------------------------------------
# 查询前端配置
# -----------------------------------------------------------------------------
# query_frontend:
#   search:
#     duration_slo: 5s
#     throughput_bytes_slo: 1.073741824e+09
#   trace_by_id:
#     duration_slo: 5s
