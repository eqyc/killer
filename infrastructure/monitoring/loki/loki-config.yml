# =============================================================================
# KILLER ERP - Loki 配置
# =============================================================================
#
# 日志聚合系统配置。
#
# =============================================================================

# TODO: 实现完整配置

# -----------------------------------------------------------------------------
# 认证配置
# -----------------------------------------------------------------------------
# auth_enabled: false

# -----------------------------------------------------------------------------
# 服务器配置
# -----------------------------------------------------------------------------
# server:
#   http_listen_port: 3100
#   grpc_listen_port: 9096

# -----------------------------------------------------------------------------
# 通用配置
# -----------------------------------------------------------------------------
# common:
#   path_prefix: /loki
#   storage:
#     filesystem:
#       chunks_directory: /loki/chunks
#       rules_directory: /loki/rules
#   replication_factor: 1
#   ring:
#     instance_addr: 127.0.0.1
#     kvstore:
#       store: inmemory

# -----------------------------------------------------------------------------
# 查询范围配置
# -----------------------------------------------------------------------------
# query_range:
#   results_cache:
#     cache:
#       embedded_cache:
#         enabled: true
#         max_size_mb: 100

# -----------------------------------------------------------------------------
# Schema 配置
# -----------------------------------------------------------------------------
# schema_config:
#   configs:
#     - from: 2024-01-01
#       store: boltdb-shipper
#       object_store: filesystem
#       schema: v11
#       index:
#         prefix: index_
#         period: 24h

# -----------------------------------------------------------------------------
# 存储配置 (生产环境)
# -----------------------------------------------------------------------------
# storage_config:
#   # 使用 S3 存储
#   aws:
#     s3: s3://access_key:secret_key@region/bucket_name
#     s3forcepathstyle: true
#
#   # 或使用 MinIO
#   # aws:
#   #   s3: http://minio:9000
#   #   s3forcepathstyle: true
#   #   bucketnames: loki-chunks
#   #   access_key_id: ${MINIO_ACCESS_KEY}
#   #   secret_access_key: ${MINIO_SECRET_KEY}

# -----------------------------------------------------------------------------
# 压缩器配置
# -----------------------------------------------------------------------------
# compactor:
#   working_directory: /loki/compactor
#   shared_store: filesystem
#   compaction_interval: 10m
#   retention_enabled: true
#   retention_delete_delay: 2h
#   retention_delete_worker_count: 150

# -----------------------------------------------------------------------------
# 限制配置
# -----------------------------------------------------------------------------
# limits_config:
#   retention_period: 720h  # 30 天
#   enforce_metric_name: false
#   reject_old_samples: true
#   reject_old_samples_max_age: 168h
#   ingestion_rate_mb: 10
#   ingestion_burst_size_mb: 20
#   max_streams_per_user: 10000
#   max_line_size: 256kb

# -----------------------------------------------------------------------------
# 表管理器配置
# -----------------------------------------------------------------------------
# table_manager:
#   retention_deletes_enabled: true
#   retention_period: 720h

# -----------------------------------------------------------------------------
# Ruler 配置 (日志告警)
# -----------------------------------------------------------------------------
# ruler:
#   storage:
#     type: local
#     local:
#       directory: /loki/rules
#   rule_path: /loki/rules-temp
#   alertmanager_url: http://alertmanager:9093
#   ring:
#     kvstore:
#       store: inmemory
#   enable_api: true
